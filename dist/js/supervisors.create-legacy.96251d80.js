"use strict";(self["webpackChunkcontrol_panel"]=self["webpackChunkcontrol_panel"]||[]).push([[462],{99583:function(e,r,t){t.d(r,{GD:function(){return o},_d:function(){return u},l5:function(){return l},lO:function(){return p},xJ:function(){return c}});var n=t(16198),s=(t(35666),t(9653),t(76051)),a="roles/",o=function(e){return a+e+"/"},i=function(e){return a+e},c=function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(){var r,t,n,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=o.length>0&&void 0!==o[0]&&o[0],t=o.length>1&&void 0!==o[1]&&o[1],e.next=4,s.ZP.get(a,{with_permissions:Number(r),with_supervisors:Number(t)});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(r,t){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={name:r,permissions:t},o=s.ZP.post(a,n),e.abrupt("return",o);case 3:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),l=function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.ZP["delete"](i(r)),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),p=function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.ZP.put(o(r),{permissions:t}),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()},64351:function(e,r,t){t.d(r,{Z:function(){return g}});var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"d-inline-block justify-center"},[e.loading?t("div",{staticClass:"text-center"},[t("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):e._e(),t("checkboxes-list",{attrs:{autoSelected:e.autoSelected,fields:e.rolesList},on:{input:function(r){e.selected=r}}})],1)},s=[],a=t(16198),o=t(62032),i=(t(35666),t(68309),t(99583)),c=t(34064),u={props:{autoSelected:{type:Array,default:function(){return[]}}},components:{checkboxesList:c.Z},data:function(){return{roles:[],selected:[],loading:!0}},computed:{rolesList:function(){var e,r=[],t=(0,o.Z)(this.roles);try{for(t.s();!(e=t.n()).done;){var n=e.value;r.push({value:n.id,label:n.name})}}catch(s){t.e(s)}finally{t.f()}return r}},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.loadRoles();case 2:case"end":return r.stop()}}),r)})))()},methods:{loadRoles:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.lading=!0,r.prev=1,r.next=4,(0,i.xJ)(!1,!1);case 4:t=r.sent,e.roles=t.data.data,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),alert(r.t0);case 11:e.loading=!1;case 12:case"end":return r.stop()}}),r,null,[[1,8]])})))()}},watch:{selected:function(e){this.$emit("input",e)}}},l=u,p=t(1001),d=t(43453),m=t.n(d),v=t(90624),f=(0,p.Z)(l,n,s,!1,null,null,null),g=f.exports;m()(f,{VProgressCircular:v.Z})},68381:function(e,r,t){t.r(r),t.d(r,{default:function(){return R}});var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-dialog",{attrs:{width:"800",scrollable:"",persistent:"",value:!0}},[t("v-card",{attrs:{loading:e.loading,disabled:e.loading}},[t("v-card-title",[t("p",{staticClass:"headline"},[e._v(e._s(e.$t("pages.create_supervisor.title")))]),t("v-spacer"),t("v-btn",{attrs:{icon:"",color:"error"},on:{click:e.goBack}},[t("v-icon",[e._v("mdi-close")])],1)],1),t("v-divider",{}),t("v-card-text",{staticClass:"pt-4"},[t("v-row",[t("v-col",[t("v-text-field",{attrs:{type:"text",placeholder:e.$t("pages.create_supervisor.form.name.placeholder"),label:e.$t("pages.create_supervisor.form.name.label"),outlined:"","error-messages":e.nameErrors,block:""},model:{value:e.name,callback:function(r){e.name=r},expression:"name"}})],1),t("v-col",[t("v-text-field",{attrs:{type:"text",placeholder:e.$t("pages.create_supervisor.form.user_name.placeholder"),label:e.$t("pages.create_supervisor.form.user_name.label"),outlined:"","error-messages":e.userNameErrors,block:"","prepend-inner-icon":"mdi-at"},model:{value:e.userName,callback:function(r){e.userName=r},expression:"userName"}})],1)],1),""!=e.generatedPassword.trim()?t("v-row",[t("v-col",[t("v-snackbar",{attrs:{timeout:3e3,color:"success"},scopedSlots:e._u([{key:"action",fn:function(r){var n=r.attrs;return[e._v(" "+e._s(e.$t("pages.create_supervisor.password_copied_successfully"))+" "),t("v-btn",e._b({attrs:{color:"error",icon:""},on:{click:function(r){e.showPasswordCopiedSnakbar=!1}}},"v-btn",n,!1),[t("v-icon",{attrs:{color:"error"}},[e._v("mdi-close")])],1)]}}],null,!1,4111639256),model:{value:e.showPasswordCopiedSnakbar,callback:function(r){e.showPasswordCopiedSnakbar=r},expression:"showPasswordCopiedSnakbar"}}),t("v-alert",{attrs:{type:"success",border:"bottom",outlined:"",prominent:"",dense:"",icon:"mdi-lock","close-icon":"mdi-check"}},[t("p",[e._v(" "+e._s(e.$t("pages.create_supervisor.copy_generated_password"))+" ")]),t("v-text-field",{ref:"generatedPasswordTextField",staticClass:"d-inline-block mx-2",attrs:{outlined:"",readonly:!0,color:"success",dense:"","append-icon":"mdi-content-copy"},on:{"click:append":e.copyGeneratedPassword},model:{value:e.generatedPassword,callback:function(r){e.generatedPassword=r},expression:"generatedPassword"}})],1)],1)],1):e._e(),t("v-row",[t("v-col",[t("div",[t("span",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e.$t("pages.create_supervisor.form.roles.label"))+" ")]),e._v(" ("+e._s(e.$t("pages.create_supervisor.form.roles.placeholder"))+") ")]),e.showEmptyRolesError?t("v-alert",{attrs:{type:"error",border:"bottom",outlined:""}},[e._v(" "+e._s(e.$t("pages.create_supervisor.form.roles.errors.empty"))+" ")]):e._e(),t("select-supervisors",{staticClass:"mx-auto",on:{input:function(r){e.roles=r}}})],1)],1)],1),t("v-divider",{}),t("v-card-actions",{staticClass:"pa-2"},[t("v-spacer"),t("v-btn",{attrs:{text:"",large:"",color:"error"},on:{click:e.goBack}},[t("v-icon",[e._v("mdi-cancel")]),t("span",{staticClass:"mx-1"}),t("span",[e._v(e._s(e.$t("pages.create_role.form.cancel")))])],1),t("span",{staticClass:"mx-2"}),t("v-btn",{attrs:{large:"",color:"primary",loading:e.loading},on:{click:e.save}},[t("v-icon",[e._v("mdi-content-save")]),t("span",{staticClass:"mx-2"}),t("span",[e._v(e._s(e.$t("pages.create_role.form.save")))])],1)],1)],1)],1)},s=[],a=t(16198),o=(t(35666),t(73210),t(68309),t(63114)),i=t(91761),c=t(64351),u=t(73821),l={components:{SelectSupervisors:c.Z},data:function(){return{name:"",userName:"",dialog:!0,roles:[],permissions:[],nameErrors:[],userNameErrors:[],loading:!1,showEmptyRolesError:!1,generatedPassword:"",showPasswordCopiedSnakbar:!1}},methods:{copyGeneratedPassword:function(){var e=this.$refs.generatedPasswordTextField.$el.querySelector("input");e.select(),window.document.execCommand("copy"),this.showPasswordCopiedSnakbar=!0},goBack:function(){window.history.back()},save:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function r(){var t,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.loading){r.next=2;break}return r.abrupt("return");case 2:if(e.nameErrors=[],e.userNameErrors=[],e.showEmptyRolesError=!1,""!=e.name.trim()){r.next=8;break}return e.nameErrors.push(e.$t("pages.create_supervisor.form.name.errors.empty")),r.abrupt("return");case 8:if(""!=e.userName.trim()){r.next=11;break}return e.userNameErrors.push(e.$t("pages.create_supervisor.form.user_name.errors.empty")),r.abrupt("return");case 11:if(!(e.roles.length<1)){r.next=14;break}return e.showEmptyRolesError=!0,r.abrupt("return");case 14:return e.loading=!0,r.prev=15,r.next=18,(0,i.z8)(e.name,e.userName);case 18:return t=r.sent,n=t.data.data,r.next=22,(0,i.Lk)(n.id,e.roles);case 22:e.generatedPassword=n.password,u.c.$emit("supervisorCreated",n),e.$emit("supervisorCreated",n),r.next=30;break;case 27:r.prev=27,r.t0=r["catch"](15),r.t0.response&&r.t0.response.status==o.Z.HTTP_UNPROCESSABLE_ENTITY?(r.t0.response.data.errors.name&&(e.nameErrors=r.t0.response.data.errors.name),r.t0.response.data.errors.user_name&&(e.userNameErrors=r.t0.response.data.errors.user_name)):alert(r.t0);case 30:e.loading=!1;case 31:case"end":return r.stop()}}),r,null,[[15,27]])})))()}}},p=l,d=t(1001),m=t(43453),v=t.n(m),f=t(35098),g=t(63150),h=t(53237),w=t(37118),_=t(82102),b=t(4497),k=t(11418),x=t(96428),y=t(62877),Z=t(13202),C=t(99762),E=t(55978),P=(0,d.Z)(p,n,s,!1,null,null,null),R=P.exports;v()(P,{VAlert:f.Z,VBtn:g.Z,VCard:h.Z,VCardActions:w.h7,VCardText:w.ZB,VCardTitle:w.EB,VCol:_.Z,VDialog:b.Z,VDivider:k.Z,VIcon:x.Z,VRow:y.Z,VSnackbar:Z.Z,VSpacer:C.Z,VTextField:E.Z})}}]);
//# sourceMappingURL=supervisors.create-legacy.96251d80.js.map