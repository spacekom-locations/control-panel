"use strict";(self["webpackChunkcontrol_panel"]=self["webpackChunkcontrol_panel"]||[]).push([[462],{64351:function(e,s,r){r.d(s,{Z:function(){return v}});var t=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"d-inline-block justify-center"},[e.loading?r("div",{staticClass:"text-center"},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):e._e(),r("checkboxes-list",{attrs:{autoSelected:e.autoSelected,fields:e.rolesList},on:{input:function(s){e.selected=s}}})],1)},a=[],o=r(99583),n=r(34064),i={props:{autoSelected:{type:Array,default:()=>[]}},components:{checkboxesList:n.Z},data(){return{roles:[],selected:[],loading:!0}},computed:{rolesList(){const e=[];for(let s of this.roles)e.push({value:s.id,label:s.name});return e}},async created(){await this.loadRoles()},methods:{async loadRoles(){this.lading=!0;try{const e=await(0,o.xJ)(!1,!1);this.roles=e.data.data}catch(e){alert(e)}this.loading=!1}},watch:{selected(e){this.$emit("input",e)}}},l=i,c=r(1001),d=r(43453),p=r.n(d),u=r(90624),m=(0,c.Z)(l,t,a,!1,null,null,null),v=m.exports;p()(m,{VProgressCircular:u.Z})},68381:function(e,s,r){r.r(s),r.d(s,{default:function(){return P}});var t=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("v-dialog",{attrs:{width:"800",scrollable:"",persistent:"",value:!0}},[r("v-card",{attrs:{loading:e.loading,disabled:e.loading}},[r("v-card-title",[r("p",{staticClass:"headline"},[e._v(e._s(e.$t("pages.create_supervisor.title")))]),r("v-spacer"),r("v-btn",{attrs:{icon:"",color:"error"},on:{click:e.goBack}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-divider",{}),r("v-card-text",{staticClass:"pt-4"},[r("v-row",[r("v-col",[r("v-text-field",{attrs:{type:"text",placeholder:e.$t("pages.create_supervisor.form.name.placeholder"),label:e.$t("pages.create_supervisor.form.name.label"),outlined:"","error-messages":e.nameErrors,block:""},model:{value:e.name,callback:function(s){e.name=s},expression:"name"}})],1),r("v-col",[r("v-text-field",{attrs:{type:"text",placeholder:e.$t("pages.create_supervisor.form.user_name.placeholder"),label:e.$t("pages.create_supervisor.form.user_name.label"),outlined:"","error-messages":e.userNameErrors,block:"","prepend-inner-icon":"mdi-at"},model:{value:e.userName,callback:function(s){e.userName=s},expression:"userName"}})],1)],1),""!=e.generatedPassword.trim()?r("v-row",[r("v-col",[r("v-snackbar",{attrs:{timeout:3e3,color:"success"},scopedSlots:e._u([{key:"action",fn:function(s){var t=s.attrs;return[e._v(" "+e._s(e.$t("pages.create_supervisor.password_copied_successfully"))+" "),r("v-btn",e._b({attrs:{color:"error",icon:""},on:{click:function(s){e.showPasswordCopiedSnakbar=!1}}},"v-btn",t,!1),[r("v-icon",{attrs:{color:"error"}},[e._v("mdi-close")])],1)]}}],null,!1,4111639256),model:{value:e.showPasswordCopiedSnakbar,callback:function(s){e.showPasswordCopiedSnakbar=s},expression:"showPasswordCopiedSnakbar"}}),r("v-alert",{attrs:{type:"success",border:"bottom",outlined:"",prominent:"",dense:"",icon:"mdi-lock","close-icon":"mdi-check"}},[r("p",[e._v(" "+e._s(e.$t("pages.create_supervisor.copy_generated_password"))+" ")]),r("v-text-field",{ref:"generatedPasswordTextField",staticClass:"d-inline-block mx-2",attrs:{outlined:"",readonly:!0,color:"success",dense:"","append-icon":"mdi-content-copy"},on:{"click:append":e.copyGeneratedPassword},model:{value:e.generatedPassword,callback:function(s){e.generatedPassword=s},expression:"generatedPassword"}})],1)],1)],1):e._e(),r("v-row",[r("v-col",[r("div",[r("span",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e.$t("pages.create_supervisor.form.roles.label"))+" ")]),e._v(" ("+e._s(e.$t("pages.create_supervisor.form.roles.placeholder"))+") ")]),e.showEmptyRolesError?r("v-alert",{attrs:{type:"error",border:"bottom",outlined:""}},[e._v(" "+e._s(e.$t("pages.create_supervisor.form.roles.errors.empty"))+" ")]):e._e(),r("select-supervisors",{staticClass:"mx-auto",on:{input:function(s){e.roles=s}}})],1)],1)],1),r("v-divider",{}),r("v-card-actions",{staticClass:"pa-2"},[r("v-spacer"),r("v-btn",{attrs:{text:"",large:"",color:"error"},on:{click:e.goBack}},[r("v-icon",[e._v("mdi-cancel")]),r("span",{staticClass:"mx-1"}),r("span",[e._v(e._s(e.$t("pages.create_role.form.cancel")))])],1),r("span",{staticClass:"mx-2"}),r("v-btn",{attrs:{large:"",color:"primary",loading:e.loading},on:{click:e.save}},[r("v-icon",[e._v("mdi-content-save")]),r("span",{staticClass:"mx-2"}),r("span",[e._v(e._s(e.$t("pages.create_role.form.save")))])],1)],1)],1)],1)},a=[],o=r(63114),n=r(91761),i=r(64351),l=r(73821),c={components:{SelectSupervisors:i.Z},data(){return{name:"",userName:"",dialog:!0,roles:[],permissions:[],nameErrors:[],userNameErrors:[],loading:!1,showEmptyRolesError:!1,generatedPassword:"",showPasswordCopiedSnakbar:!1}},methods:{copyGeneratedPassword(){let e=this.$refs.generatedPasswordTextField.$el.querySelector("input");e.select(),window.document.execCommand("copy"),this.showPasswordCopiedSnakbar=!0},goBack(){window.history.back()},async save(){if(!this.loading)if(this.nameErrors=[],this.userNameErrors=[],this.showEmptyRolesError=!1,""!=this.name.trim())if(""!=this.userName.trim())if(this.roles.length<1)this.showEmptyRolesError=!0;else{this.loading=!0;try{const e=await(0,n.z8)(this.name,this.userName),s=e.data.data;await(0,n.Lk)(s.id,this.roles),this.generatedPassword=s.password,l.c.$emit("supervisorCreated",s),this.$emit("supervisorCreated",s)}catch(e){e.response&&e.response.status==o.Z.HTTP_UNPROCESSABLE_ENTITY?(e.response.data.errors.name&&(this.nameErrors=e.response.data.errors.name),e.response.data.errors.user_name&&(this.userNameErrors=e.response.data.errors.user_name)):alert(e)}this.loading=!1}else this.userNameErrors.push(this.$t("pages.create_supervisor.form.user_name.errors.empty"));else this.nameErrors.push(this.$t("pages.create_supervisor.form.name.errors.empty"))}}},d=c,p=r(1001),u=r(43453),m=r.n(u),v=r(35098),h=r(63150),_=r(53237),g=r(37118),f=r(82102),w=r(4497),b=r(11418),k=r(96428),y=r(62877),C=r(13202),x=r(99762),E=r(55978),$=(0,p.Z)(d,t,a,!1,null,null,null),P=$.exports;m()($,{VAlert:v.Z,VBtn:h.Z,VCard:_.Z,VCardActions:g.h7,VCardText:g.ZB,VCardTitle:g.EB,VCol:f.Z,VDialog:w.Z,VDivider:b.Z,VIcon:k.Z,VRow:y.Z,VSnackbar:C.Z,VSpacer:x.Z,VTextField:E.Z})}}]);
//# sourceMappingURL=supervisors.create.3696fce4.js.map