{"version":3,"file":"js/roles.create-legacy.cb2335f5.js","mappings":"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","sources":["webpack://control-panel/./src/api/roles.js","webpack://control-panel/./src/views/roles/Create.vue?7042","webpack://control-panel/./src/components/roles/selectPermissions.vue?ea3b","webpack://control-panel/src/components/roles/selectPermissions.vue","webpack://control-panel/./src/components/roles/selectPermissions.vue?7f6d","webpack://control-panel/./src/components/roles/selectPermissions.vue","webpack://control-panel/src/views/roles/Create.vue","webpack://control-panel/./src/views/roles/Create.vue?9647","webpack://control-panel/./src/views/roles/Create.vue"],"sourcesContent":["import api from \"./index\";\n\nexport const BaseURL = \"roles/\";\nexport const editURL = (id) => BaseURL + id + \"/\";\nexport const deleteURL = (id) => BaseURL + id;\n\nexport const getAllRoles = async function(\n  withPermissions = false,\n  withSupervisors = false\n) {\n  const response = await api.get(BaseURL, {\n    with_permissions: Number(withPermissions),\n    with_supervisors: Number(withSupervisors),\n  });\n  return response;\n};\n\nexport const addRole = async function(name, permissions) {\n  const data = { name, permissions };\n  const response = api.post(BaseURL, data);\n  return response;\n};\n\nexport const removeRole = async function(id) {\n  const response = api.delete(deleteURL(id));\n  return response;\n};\n\nexport const updateRolePermissions = async function(id, permissions) {\n  const response = api.put(editURL(id), { permissions });\n  return response;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"width\":\"800\",\"scrollable\":\"\",\"persistent\":\"\",\"value\":true}},[_c('v-card',{attrs:{\"loading\":_vm.loading,\"disabled\":_vm.loading}},[_c('v-card-title',[_c('p',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.$t(\"pages.create_role.title\")))]),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"error\"},on:{\"click\":_vm.goBack}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('v-divider',{}),_c('v-card-title',{staticClass:\"d-inline-block \"},[_c('div',[_c('v-text-field',{attrs:{\"type\":\"text\",\"placeholder\":_vm.$t('pages.create_role.form.name.placeholder'),\"label\":_vm.$t('pages.create_role.form.name.placeholder'),\"outlined\":\"\",\"error-messages\":_vm.nameErrors,\"block\":\"\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('span',{staticClass:\"font-weight-bold\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"pages.create_role.form.permissions.label\"))+\" \")]),_vm._v(\" (\"+_vm._s(_vm.$t(\"pages.create_role.form.permissions.placeholder\"))+\") \")],1)]),_c('v-card-text',{staticClass:\"pt-4\"},[(_vm.showEmptyPermissionsError)?_c('v-alert',{attrs:{\"type\":\"error\",\"border\":\"bottom\",\"outlined\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"pages.create_role.form.permissions.errors.empty\"))+\" \")]):_vm._e(),_c('select-permissions',{staticClass:\"mx-auto\",on:{\"input\":function($event){_vm.permissions = $event}}})],1),_c('v-divider',{}),_c('v-card-actions',{staticClass:\"pa-2\"},[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"large\":\"\",\"color\":\"error\"},on:{\"click\":_vm.goBack}},[_c('v-icon',[_vm._v(\"mdi-cancel\")]),_c('span',{staticClass:\"mx-1\"}),_c('span',[_vm._v(_vm._s(_vm.$t(\"pages.create_role.form.cancel\")))])],1),_c('span',{staticClass:\"mx-2\"}),_c('v-btn',{attrs:{\"large\":\"\",\"color\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.save}},[_c('v-icon',[_vm._v(\"mdi-content-save\")]),_c('span',{staticClass:\"mx-2\"}),_c('span',[_vm._v(_vm._s(_vm.$t(\"pages.create_role.form.save\")))])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-inline-block justify-center\"},[(_vm.loading)?_c('div',{staticClass:\"text-center\"},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}})],1):_vm._e(),_c('checkboxes-list',{attrs:{\"fields\":_vm.permissionsList},on:{\"input\":function($event){_vm.selected = $event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"d-inline-block justify-center\">\n    <div class=\"text-center\" v-if=\"loading\">\n      <v-progress-circular indeterminate color=\"primary\"></v-progress-circular>\n    </div>\n    <checkboxes-list :fields=\"permissionsList\" @input=\"selected = $event\" />\n  </div>\n</template>\n\n<script>\nimport { getSystemPermissions } from \"../../api/supervisors\";\nimport checkboxesList from \"../checkboxesList.vue\";\nexport default {\n  components: { checkboxesList },\n  data() {\n    return {\n      permissions: [],\n      selected: [],\n      loading: true,\n    };\n  },\n  computed: {\n    permissionsList() {\n      const list = [];\n      for (let permission of this.permissions) {\n        list.push({\n          value: permission,\n          label: this.$t(`permissions.${permission}`),\n        });\n      }\n      return list;\n    },\n  },\n  async created() {\n    await this.loadPermissions();\n  },\n  methods: {\n    async loadPermissions() {\n      this.lading = true;\n      try {\n        const response = await getSystemPermissions();\n        this.permissions = response.data.data.permissions;\n      } catch (error) {\n        alert(error);\n      }\n      this.loading = false;\n    },\n  },\n  watch: {\n    selected(value) {\n      this.$emit(\"input\", value);\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./selectPermissions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./selectPermissions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./selectPermissions.vue?vue&type=template&id=5a8ecbfe&\"\nimport script from \"./selectPermissions.vue?vue&type=script&lang=js&\"\nexport * from \"./selectPermissions.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\ninstallComponents(component, {VProgressCircular})\n","<template>\n  <v-dialog width=\"800\" scrollable persistent :value=\"true\">\n    <v-card :loading=\"loading\" :disabled=\"loading\">\n      <v-card-title>\n        <p class=\"headline\">{{ $t(\"pages.create_role.title\") }}</p>\n        <v-spacer></v-spacer>\n        <v-btn icon color=\"error\" @click=\"goBack\">\n          <v-icon>mdi-close</v-icon>\n        </v-btn>\n      </v-card-title>\n      <v-divider class=\"\"></v-divider>\n      <v-card-title class=\"d-inline-block \">\n        <div>\n          <v-text-field\n            type=\"text\"\n            :placeholder=\"$t('pages.create_role.form.name.placeholder')\"\n            :label=\"$t('pages.create_role.form.name.placeholder')\"\n            v-model=\"name\"\n            outlined\n            :error-messages=\"nameErrors\"\n            block\n          ></v-text-field>\n          <span class=\"font-weight-bold\">\n            {{ $t(\"pages.create_role.form.permissions.label\") }}\n          </span>\n          ({{ $t(\"pages.create_role.form.permissions.placeholder\") }})\n        </div>\n      </v-card-title>\n\n      <v-card-text class=\"pt-4\">\n        <v-alert\n          type=\"error\"\n          border=\"bottom\"\n          outlined\n          v-if=\"showEmptyPermissionsError\"\n        >\n          {{ $t(\"pages.create_role.form.permissions.errors.empty\") }}\n        </v-alert>\n\n        <select-permissions @input=\"permissions = $event\" class=\"mx-auto\" />\n      </v-card-text>\n      <v-divider class=\"\"></v-divider>\n      <v-card-actions class=\"pa-2\">\n        <v-spacer></v-spacer>\n\n        <v-btn text large color=\"error\" @click=\"goBack\">\n          <v-icon>mdi-cancel</v-icon>\n          <span class=\"mx-1\"></span>\n          <span>{{ $t(\"pages.create_role.form.cancel\") }}</span>\n        </v-btn>\n        <span class=\"mx-2\"></span>\n        <v-btn large color=\"primary\" :loading=\"loading\" @click=\"save\">\n          <v-icon>mdi-content-save</v-icon>\n          <span class=\"mx-2\"></span>\n          <span>{{ $t(\"pages.create_role.form.save\") }}</span>\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport responseCodes from \"../../api/responseCodes\";\nimport { addRole } from \"../../api/roles\";\nimport SelectPermissions from \"../../components/roles/selectPermissions.vue\";\nimport { mainEventBus } from \"../../main\";\nexport default {\n  components: { SelectPermissions },\n  data() {\n    return {\n      name: \"\",\n      dialog: true,\n      permissions: [],\n      nameErrors: [],\n      loading: false,\n      showEmptyPermissionsError: false,\n    };\n  },\n  methods: {\n    goBack() {\n      window.history.back();\n    },\n    async save() {\n      if (this.loading) return;\n      this.nameErrors = [];\n      this.showEmptyPermissionsError = false;\n      if (this.name.trim() == \"\") {\n        this.nameErrors.push(\n          this.$t(\"pages.create_role.form.name.errors.empty\")\n        );\n        return;\n      }\n      if (this.permissions.length < 1) {\n        this.showEmptyPermissionsError = true;\n        return;\n      }\n      this.loading = true;\n      try {\n        const response = await addRole(this.name, this.permissions);\n        mainEventBus.$emit(\"roleCreated\", response.data.data.role);\n        this.$emit(\"roleCreated\", response.data.data.role);\n        this.goBack();\n      } catch (error) {\n        if (\n          error.response &&\n          error.response.status == responseCodes.HTTP_UNPROCESSABLE_ENTITY\n        ) {\n          if (error.response.data.errors.name)\n            this.nameErrors = error.response.data.errors.name;\n          else alert(error);\n        } else alert(error);\n      }\n      this.loading = false;\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Create.vue?vue&type=template&id=196a0838&\"\nimport script from \"./Create.vue?vue&type=script&lang=js&\"\nexport * from \"./Create.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAlert,VBtn,VCard,VCardActions,VCardText,VCardTitle,VDialog,VDivider,VIcon,VSpacer,VTextField})\n"],"names":["BaseURL","editURL","id","deleteURL","getAllRoles","withPermissions","withSupervisors","api","with_permissions","Number","with_supervisors","response","addRole","name","permissions","data","removeRole","updateRolePermissions","render","_vm","this","_h","$createElement","_c","_self","attrs","loading","staticClass","_v","_s","$t","on","goBack","nameErrors","model","value","callback","$$v","expression","_e","$event","save","staticRenderFns","permissionsList","selected","components","checkboxesList","computed","list","label","created","methods","loadPermissions","getSystemPermissions","alert","watch","component","VProgressCircular","SelectPermissions","dialog","showEmptyPermissionsError","window","mainEventBus","VAlert"],"sourceRoot":""}