"use strict";(self["webpackChunkcontrol_panel"]=self["webpackChunkcontrol_panel"]||[]).push([[323],{70960:function(t,e,s){s.d(e,{Z:function(){return h}});var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-chip",{attrs:{small:"",color:"ACTIVE"==t.status.toUpperCase()?"success":"error"}},[t._v(" "+t._s(t.$t("models.supervisor.status."+t.status)))])},i=[],a={props:{status:{type:String,required:!0}}},o=a,n=s(1001),l=s(43453),u=s.n(l),c=s(95424),d=(0,n.Z)(o,r,i,!1,null,null,null),h=d.exports;u()(d,{VChip:c.Z})},29410:function(t,e,s){s.r(e),s.d(e,{default:function(){return ct}});var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("router-view"),s("v-row",[s("v-col",[s("div",{staticClass:"d-flex justify-space-between align-center"},[s("div",[s("h2",{staticClass:"display-2"},[t._v(" "+t._s(t.$t("pages.supervisors.title"))+" ")]),s("p",{staticClass:"my-2"},[t._v(t._s(t.$t("pages.supervisors.subtitle")))])]),s("add-form-route",{attrs:{has:["supervisors::add"],routeName:"Supervisors.create"}})],1)])],1),s("v-row",[s("v-col",[s("protected-view",{attrs:{has:["supervisors::retrieve"]}},[s("supervisors-list")],1)],1)],1)],1)},i=[],a=s(33161),o=s.n(a),n=s(53872),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"pa-1",attrs:{flat:""}},[s("v-card-text",[s("search-field",{model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),s("v-data-table",{attrs:{headers:t.headers,items:t.supervisors,loading:t.loading,search:t.search},scopedSlots:t._u([{key:"item.user_name",fn:function(e){var r=e.item;return[t.$permissions().has(["supervisors::retrieve"])?s("protected-view",{attrs:{has:["supervisors::retrieve"]}},[s("router-link",{attrs:{to:{name:"Supervisors.show",params:{user_name:r.user_name}}}},[s("v-btn",{attrs:{color:"primary",text:""}},[t._v(" @"+t._s(r.user_name)+" ")])],1)],1):s("span",[t._v(" @"+t._s(r.user_name)+" ")])]}},{key:"item.roles",fn:function(t){var e=t.item;return[s("list-supervisor-roles",{attrs:{roles:e.roles}})]}},{key:"item.last_activity",fn:function(e){var r=e.item;return[s("v-badge",{attrs:{inline:"",left:"",dot:"",color:t.isOnline(r.last_activity)?"success":"transparent"}},[s("relative-date",{attrs:{date:r.last_activity}})],1)]}},{key:"item.status",fn:function(t){var e=t.item;return[s("supervisor-status",{attrs:{status:e.status}})]}}],null,!0)})],1)],1)},u=[],c=s(16198),d=(s(57327),s(41539),s(35666),s(91761)),h=s(21359),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,i=e.attrs;return[s("span",t._g(t._b({},"span",i,!1),r),[t._v(t._s(t.dateToView))])]}}])},[s("span",[t._v(t._s(t.sugarDate))])])},p=[],f={data:function(){return{dateToView:"",intervalId:0,showedTimestamp:(new Date).getTime()}},props:{date:{required:!0}},computed:{sugarDate:function(){return o().Date(this.date).full()}},created:function(){this.intervalId=setInterval(this.getNow,1e3)},methods:{getNow:function(){this.intervalId&&(o().Date.isBefore(o().Date(this.date),"before 1 minute")&&(window.clearInterval(this.intervalId),this.intervalId=setInterval(this.getNow,6e4)),o().Date.isBefore(o().Date(this.date),"before 1 hour")&&(window.clearInterval(this.intervalId),this.intervalId=setInterval(this.getNow,36e5)),o().Date.isBefore(o().Date(this.date),"before 24 hours")&&(window.clearInterval(this.intervalId),this.intervalId=setInterval(this.getNow,864e5)),o().Date.isBefore(o().Date(this.date),"before 25 hours")&&window.clearInterval(this.intervalId)),this.dateToView=this.relativeDate()},relativeDate:function(){return o().Date(this.date).relative()}}},m=f,g=s(1001),b=s(43453),_=s.n(b),w=s(19330),Z=(0,g.Z)(m,v,p,!1,null,null,null),y=Z.exports;_()(Z,{VTooltip:w.Z});var $=s(54803),D=s(35488),C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-dialog",{attrs:{scrollable:"","max-width":"750px",transition:"dialog-transition"},model:{value:t.showAllRolesDialog,callback:function(e){t.showAllRolesDialog=e},expression:"showAllRolesDialog"}},[s("v-card",{attrs:{elevation:"","max-width":""}},[s("v-card-title",[s("v-spacer"),s("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(e){t.showAllRolesDialog=!1}}},[s("v-icon",[t._v("mdi-close")])],1)],1),s("v-divider",{}),s("v-card-text",[s("checkboxes-list",{attrs:{"auto-selected":t.rolesIDs,fields:t.rolesList,readonly:!0}})],1)],1)],1),t._l(t.firstTwoRoles,(function(e,r){return s("v-chip",{key:r,staticClass:"mx-1",attrs:{color:"primary",outlined:"",small:""}},[t._v(" "+t._s(e.name)+" ")])})),t.countNotViewedRoles?s("v-btn",{attrs:{small:"",rounded:"",color:"primary"},on:{click:function(e){t.showAllRolesDialog=!0}}},[s("span",[t._v(" +"+t._s(t.countNotViewedRoles)+" ")]),s("span",{staticClass:"mx-2"}),s("v-icon",[t._v("mdi-eye")])],1):t._e()],2)},B=[],V=s(62032),x=(s(68309),s(34064)),R={components:{checkboxesList:x.Z},props:{roles:{type:Array,default:function(){return[]}}},data:function(){return{showAllRolesDialog:!1}},computed:{firstTwoRoles:function(){var t=[];return this.roles.length>0&&t.push(this.roles[0]),this.roles.length>1&&t.push(this.roles[1]),t},countNotViewedRoles:function(){return this.roles.length-this.firstTwoRoles.length},rolesList:function(){var t,e=[],s=(0,V.Z)(this.roles);try{for(s.s();!(t=s.n()).done;){var r=t.value;e.push({value:r.id,label:"".concat(r.name)})}}catch(i){s.e(i)}finally{s.f()}return e},rolesIDs:function(){var t,e=[],s=(0,V.Z)(this.roles);try{for(s.s();!(t=s.n()).done;){var r=t.value;e.push(r.id)}}catch(i){s.e(i)}finally{s.f()}return e}}},k=R,I=s(63150),S=s(53237),O=s(37118),T=s(95424),E=s(4497),N=s(11418),A=s(96428),L=s(99762),X=(0,g.Z)(k,C,B,!1,null,null,null),Y=X.exports;_()(X,{VBtn:I.Z,VCard:S.Z,VCardText:O.ZB,VCardTitle:O.EB,VChip:T.Z,VDialog:E.Z,VDivider:N.Z,VIcon:A.Z,VSpacer:L.Z});var z=s(70960),P=s(73821),q={components:{searchField:$.Z,RelativeDate:y,ProtectedView:D.Z,ListSupervisorRoles:Y,SupervisorStatus:z.Z},created:function(){var t=this;return(0,c.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadSupervisors();case 2:P.c.$on("updateSupervisors",t.loadSupervisors),P.c.$on("supervisorCreated",t.loadSupervisors);case 4:case"end":return e.stop()}}),e)})))()},data:function(){return{search:"",supervisors:[],loading:!1}},computed:{headers:function(){var t=this,e=[(0,h.r)(this.$t("pages.supervisors.list.datatable.headers.user_name"),"user_name"),(0,h.r)(this.$t("pages.supervisors.list.datatable.headers.name"),"name"),(0,h.r)(this.$t("pages.supervisors.list.datatable.headers.roles"),"roles",(function(){return t.$permissions().hasOneOf(["supervisors::view_role","supervisors::set_role","supervisors::revoke_role"])})),(0,h.r)(this.$t("pages.supervisors.list.datatable.headers.last_activity"),"last_activity"),(0,h.r)(this.$t("pages.supervisors.list.datatable.headers.status"),"status",(function(){return!0}),{align:"rtl"==this.$t("direction").toLowerCase()?"left":"right"})];return e.filter((function(t){return!!t}))}},methods:{loadSupervisors:function(){var t=this;return(0,c.Z)(regeneratorRuntime.mark((function e(){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,s=t.$permissions().hasOneOf(["supervisors::view_role","supervisors::set_role","supervisors::revoke_role"]),e.next=4,(0,d.az)(s);case 4:r=e.sent,t.supervisors=r.data.data,t.supervisors=t.supervisors.reverse(),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},isOnline:function(t){return!o().Date.isBefore(o().Date(t),"before 1 minute")}}},F=q,W=s(73274),j=s(4367),U=(s(9653),s(46952)),G=s(48085),H=s(2936),J=s(36591),K=s(93536),M=s(73325),Q=s(4589),tt=["aria-atomic","aria-label","aria-live","role","title"],et=(0,M.Z)(U.Z,(0,K.d)(["left","bottom"]),G.Z,H.Z,J.Z).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes:function(){return(0,j.Z)({"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile},this.themeClasses)},computedBottom:function(){return this.bottom?"auto":this.computedYOffset},computedLeft:function(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight:function(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop:function(){return this.bottom?this.computedYOffset:"auto"},computedXOffset:function(){return this.calcPosition(this.offsetX)},computedYOffset:function(){return this.calcPosition(this.offsetY)},isRtl:function(){return this.$vuetify.rtl},offset:function(){return this.overlap?this.dot?8:12:this.dot?2:4},styles:function(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition:function(t){return"calc(100% - ".concat((0,Q.kb)(t||this.offset),")")},genBadge:function(){var t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),s=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),r=this.$createElement("span",s,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[r]):r},genBadgeContent:function(){if(!this.dot){var t=(0,Q.z9)(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(A.Z,this.icon):void 0)}},genBadgeWrapper:function(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render:function(t){var e=[this.genBadgeWrapper()],s=[(0,Q.z9)(this)],r=this.$attrs,i=(r["aria-atomic"],r["aria-label"],r["aria-live"],r.role,r.title,(0,W.Z)(r,tt));return this.inline&&this.left?s.unshift(e):s.push(e),t("span",{staticClass:"v-badge",attrs:i,class:this.classes},s)}}),st=s(76277),rt=(0,g.Z)(F,l,u,!1,null,null,null),it=rt.exports;_()(rt,{VBadge:et,VBtn:I.Z,VCard:S.Z,VCardText:O.ZB,VDataTable:st.Z});var at={components:{AddFormRoute:n.Z,SupervisorsList:it},methods:{showDate:function(){alert(o().Date().relative())}},created:function(){this.$permissions().authorizeOneOf(["supervisors::retrieve"])}},ot=at,nt=s(82102),lt=s(62877),ut=(0,g.Z)(ot,r,i,!1,null,null,null),ct=ut.exports;_()(ut,{VCol:nt.Z,VRow:lt.Z})}}]);
//# sourceMappingURL=supervisors.index-legacy.365783e0.js.map