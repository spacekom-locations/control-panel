"use strict";(self["webpackChunkcontrol_panel"]=self["webpackChunkcontrol_panel"]||[]).push([[323],{4497:function(t,e,s){s.d(e,{Z:function(){return m}});s(26699);var i=s(43242),a=s(25795),r=s(65907),n=s(83944),o=s(90390),l=s(60423),h=s(95703),c=s(45600),u=s(73325),d=s(71824),v=s(4589);const p=(0,u.Z)(r.Z,n.Z,o.Z,l.Z,h.Z,a.Z);var m=p.extend({name:"v-dialog",directives:{ClickOutside:c.Z},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,d.Jk)("full-width",this)},beforeMount(){this.$nextTick((()=>{this.isBooted=this.isActive,this.isActive&&this.show()}))},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick((()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout((()=>this.animate=!1),150)}))},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):o.Z.options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((()=>{this.$nextTick((()=>{this.$refs.content.contains(document.activeElement)||(this.previousActiveElement=document.activeElement,this.$refs.content.focus()),this.bind()}))}))},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===v.Do.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick((()=>t&&t.focus()))}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((t=>t.contains(e)))){const t=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find((t=>!t.hasAttribute("disabled")));e&&e.focus()}},genContent(){return this.showLazyContent((()=>[this.$createElement(i.Z,{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"dialog",tabindex:this.isActive?0:void 0,"aria-modal":this.hideOverlay?void 0:"true",...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])]))},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:(0,v.kb)(this.maxWidth),width:(0,v.kb)(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},34064:function(t,e,s){s.d(e,{Z:function(){return x}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{attrs:{flat:"",permanent:"","min-width":"700"}},[s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"6"}},t._l(t.filteredFields,(function(e,i){return s("v-checkbox",{directives:[{name:"show",rawName:"v-show",value:i%2==0,expression:"index % 2 == 0"}],key:i,attrs:{label:e.label,value:e.value,color:"success",readonly:t.readonly},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})})),1),s("v-col",t._l(t.filteredFields,(function(e,i){return s("v-checkbox",{directives:[{name:"show",rawName:"v-show",value:i%2==1,expression:"index % 2 == 1"}],key:i,attrs:{label:e.label,value:e.value,color:"success",readonly:t.readonly},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})})),1)],1)],1)],1)},a=[],r={components:{},props:{fields:{type:Array,default:()=>[]},autoSelected:{type:Array,default:()=>[]},readonly:{type:Boolean,default:!1}},data(){return{selected:[],search:""}},created(){for(let t of this.autoSelected)this.selected.push(t)},computed:{filteredFields(){let t=[],e=!1,s=!1;for(let i of this.fields)e=i.label.toLowerCase().search(this.search.trim().toLowerCase())>-1,s=i.value.toString().toLowerCase().search(this.search.trim().toLowerCase())>-1,(e||s)&&t.push(i);return t}},watch:{selected(t){this.$emit("input",t)},readonly(t){if(1==t){this.selected=[];for(let t of this.autoSelected)this.selected.push(t)}}}},n=r,o=s(1001),l=s(43453),h=s.n(l),c=s(53237),u=s(37118),d=s(70172),v=s(58230),p=s(46286),m=s(20144),f=m.Z.extend({name:"rippleable",directives:{ripple:p.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),g=s(34419),b=s(73325);function w(t){t.preventDefault()}var y=(0,b.Z)(v.Z,f,g.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some((e=>this.valueComparator(e,t))):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=v.Z.options.methods.genLabel.call(this);return t?(t.data.on={click:w},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:w},ref:"input"})},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const s=e.length;e=e.filter((e=>!this.valueComparator(e,t))),e.length===s&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown(t){}}}),C=y.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...v.Z.options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(t){this.$nextTick((()=>this.inputIndeterminate=t))},inputIndeterminate(t){this.$emit("update:indeterminate",t)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(d.Z,this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...e,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}}),_=s(82102),k=s(62877),$=(0,o.Z)(n,i,a,!1,null,null,null),x=$.exports;h()($,{VCard:c.Z,VCardText:u.ZB,VCheckbox:C,VCol:_.Z,VRow:k.Z})},70960:function(t,e,s){s.d(e,{Z:function(){return d}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-chip",{attrs:{small:"",color:"ACTIVE"==t.status.toUpperCase()?"success":"error"}},[t._v(" "+t._s(t.$t("models.supervisor.status."+t.status)))])},a=[],r={props:{status:{type:String,required:!0}}},n=r,o=s(1001),l=s(43453),h=s.n(l),c=s(95424),u=(0,o.Z)(n,i,a,!1,null,null,null),d=u.exports;h()(u,{VChip:c.Z})},29410:function(t,e,s){s.r(e),s.d(e,{default:function(){return rt}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("router-view"),s("v-row",[s("v-col",[s("div",{staticClass:"d-flex justify-space-between align-center"},[s("div",[s("h2",{staticClass:"display-2"},[t._v(" "+t._s(t.$t("pages.supervisors.title"))+" ")]),s("p",{staticClass:"my-2"},[t._v(t._s(t.$t("pages.supervisors.subtitle")))])]),s("add-form-route",{attrs:{has:["supervisors::add"],routeName:"Supervisors.create"}})],1)])],1),s("v-row",[s("v-col",[s("protected-view",{attrs:{has:["supervisors::retrieve"]}},[s("supervisors-list")],1)],1)],1)],1)},a=[],r=s(33161),n=s.n(r),o=s(53872),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"pa-1",attrs:{flat:""}},[s("v-card-text",[s("search-field",{model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),s("v-data-table",{attrs:{headers:t.headers,items:t.supervisors,loading:t.loading,search:t.search},scopedSlots:t._u([{key:"item.user_name",fn:function(e){var i=e.item;return[t.$permissions().has(["supervisors::retrieve"])?s("protected-view",{attrs:{has:["supervisors::retrieve"]}},[s("router-link",{attrs:{to:{name:"Supervisors.show",params:{user_name:i.user_name}}}},[s("v-btn",{attrs:{color:"primary",text:""}},[t._v(" @"+t._s(i.user_name)+" ")])],1)],1):s("span",[t._v(" @"+t._s(i.user_name)+" ")])]}},{key:"item.roles",fn:function(t){var e=t.item;return[s("list-supervisor-roles",{attrs:{roles:e.roles}})]}},{key:"item.last_activity",fn:function(e){var i=e.item;return[s("v-badge",{attrs:{inline:"",left:"",dot:"",color:t.isOnline(i.last_activity)?"success":"transparent"}},[s("relative-date",{attrs:{date:i.last_activity}})],1)]}},{key:"item.status",fn:function(t){var e=t.item;return[s("supervisor-status",{attrs:{status:e.status}})]}}],null,!0)})],1)],1)},h=[],c=s(91761),u=s(21359),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,a=e.attrs;return[s("span",t._g(t._b({},"span",a,!1),i),[t._v(t._s(t.dateToView))])]}}])},[s("span",[t._v(t._s(t.sugarDate))])])},v=[],p={data(){return{dateToView:"",intervalId:0,showedTimestamp:(new Date).getTime()}},props:{date:{required:!0}},computed:{sugarDate(){return n().Date(this.date).full()}},created(){this.intervalId=setInterval(this.getNow,1e3)},methods:{getNow:function(){this.intervalId&&(n().Date.isBefore(n().Date(this.date),"before 1 minute")&&(window.clearInterval(this.intervalId),this.intervalId=setInterval(this.getNow,6e4)),n().Date.isBefore(n().Date(this.date),"before 1 hour")&&(window.clearInterval(this.intervalId),this.intervalId=setInterval(this.getNow,36e5)),n().Date.isBefore(n().Date(this.date),"before 24 hours")&&(window.clearInterval(this.intervalId),this.intervalId=setInterval(this.getNow,864e5)),n().Date.isBefore(n().Date(this.date),"before 25 hours")&&window.clearInterval(this.intervalId)),this.dateToView=this.relativeDate()},relativeDate(){return n().Date(this.date).relative()}}},m=p,f=s(1001),g=s(43453),b=s.n(g),w=s(19330),y=(0,f.Z)(m,d,v,!1,null,null,null),C=y.exports;b()(y,{VTooltip:w.Z});var _=s(54803),k=s(35488),$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-dialog",{attrs:{scrollable:"","max-width":"750px",transition:"dialog-transition"},model:{value:t.showAllRolesDialog,callback:function(e){t.showAllRolesDialog=e},expression:"showAllRolesDialog"}},[s("v-card",{attrs:{elevation:"","max-width":""}},[s("v-card-title",[s("v-spacer"),s("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(e){t.showAllRolesDialog=!1}}},[s("v-icon",[t._v("mdi-close")])],1)],1),s("v-divider",{}),s("v-card-text",[s("checkboxes-list",{attrs:{"auto-selected":t.rolesIDs,fields:t.rolesList,readonly:!0}})],1)],1)],1),t._l(t.firstTwoRoles,(function(e,i){return s("v-chip",{key:i,staticClass:"mx-1",attrs:{color:"primary",outlined:"",small:""}},[t._v(" "+t._s(e.name)+" ")])})),t.countNotViewedRoles?s("v-btn",{attrs:{small:"",rounded:"",color:"primary"},on:{click:function(e){t.showAllRolesDialog=!0}}},[s("span",[t._v(" +"+t._s(t.countNotViewedRoles)+" ")]),s("span",{staticClass:"mx-2"}),s("v-icon",[t._v("mdi-eye")])],1):t._e()],2)},x=[],Z=s(34064),I={components:{checkboxesList:Z.Z},props:{roles:{type:Array,default:()=>[]}},data(){return{showAllRolesDialog:!1}},computed:{firstTwoRoles(){const t=[];return this.roles.length>0&&t.push(this.roles[0]),this.roles.length>1&&t.push(this.roles[1]),t},countNotViewedRoles(){return this.roles.length-this.firstTwoRoles.length},rolesList(){const t=[];for(let e of this.roles)t.push({value:e.id,label:`${e.name}`});return t},rolesIDs(){const t=[];for(let e of this.roles)t.push(e.id);return t}}},S=I,V=s(63150),A=s(53237),B=s(37118),D=s(95424),O=s(4497),T=s(11418),E=s(96428),R=s(99762),L=(0,f.Z)(S,$,x,!1,null,null,null),N=L.exports;b()(L,{VBtn:V.Z,VCard:A.Z,VCardText:B.ZB,VCardTitle:B.EB,VChip:D.Z,VDialog:O.Z,VDivider:T.Z,VIcon:E.Z,VSpacer:R.Z});var F=s(70960),z=s(73821),M={components:{searchField:_.Z,RelativeDate:C,ProtectedView:k.Z,ListSupervisorRoles:N,SupervisorStatus:F.Z},async created(){await this.loadSupervisors(),z.c.$on("updateSupervisors",this.loadSupervisors),z.c.$on("supervisorCreated",this.loadSupervisors)},data(){return{search:"",supervisors:[],loading:!1}},computed:{headers(){const t=[(0,u.r)(this.$t("pages.supervisors.list.datatable.headers.user_name"),"user_name"),(0,u.r)(this.$t("pages.supervisors.list.datatable.headers.name"),"name"),(0,u.r)(this.$t("pages.supervisors.list.datatable.headers.roles"),"roles",(()=>this.$permissions().hasOneOf(["supervisors::view_role","supervisors::set_role","supervisors::revoke_role"]))),(0,u.r)(this.$t("pages.supervisors.list.datatable.headers.last_activity"),"last_activity"),(0,u.r)(this.$t("pages.supervisors.list.datatable.headers.status"),"status",(()=>!0),{align:"rtl"==this.$t("direction").toLowerCase()?"left":"right"})];return t.filter((t=>!!t))}},methods:{async loadSupervisors(){this.loading=!0;const t=this.$permissions().hasOneOf(["supervisors::view_role","supervisors::set_role","supervisors::revoke_role"]),e=await(0,c.az)(t);this.supervisors=e.data.data,this.supervisors=this.supervisors.reverse(),this.loading=!1},isOnline(t){return!n().Date.isBefore(n().Date(t),"before 1 minute")}}},X=M,P=s(46952),W=s(48085),Y=s(2936),q=s(36591),K=s(93536),j=s(73325),J=s(4589),U=(0,j.Z)(P.Z,(0,K.d)(["left","bottom"]),W.Z,Y.Z,q.Z).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes(){return{"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile,...this.themeClasses}},computedBottom(){return this.bottom?"auto":this.computedYOffset},computedLeft(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop(){return this.bottom?this.computedYOffset:"auto"},computedXOffset(){return this.calcPosition(this.offsetX)},computedYOffset(){return this.calcPosition(this.offsetY)},isRtl(){return this.$vuetify.rtl},offset(){return this.overlap?this.dot?8:12:this.dot?2:4},styles(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition(t){return`calc(100% - ${(0,J.kb)(t||this.offset)})`},genBadge(){const t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),s=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),i=this.$createElement("span",s,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[i]):i},genBadgeContent(){if(this.dot)return;const t=(0,J.z9)(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(E.Z,this.icon):void 0)},genBadgeWrapper(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render(t){const e=[this.genBadgeWrapper()],s=[(0,J.z9)(this)],{"aria-atomic":i,"aria-label":a,"aria-live":r,role:n,title:o,...l}=this.$attrs;return this.inline&&this.left?s.unshift(e):s.push(e),t("span",{staticClass:"v-badge",attrs:l,class:this.classes},s)}}),G=s(76277),H=(0,f.Z)(X,l,h,!1,null,null,null),Q=H.exports;b()(H,{VBadge:U,VBtn:V.Z,VCard:A.Z,VCardText:B.ZB,VDataTable:G.Z});var tt={components:{AddFormRoute:o.Z,SupervisorsList:Q},methods:{showDate(){alert(n().Date().relative())}},created(){this.$permissions().authorizeOneOf(["supervisors::retrieve"])}},et=tt,st=s(82102),it=s(62877),at=(0,f.Z)(et,i,a,!1,null,null,null),rt=at.exports;b()(at,{VCol:st.Z,VRow:it.Z})}}]);
//# sourceMappingURL=supervisors.index.1f2e6c82.js.map