"use strict";(self["webpackChunkcontrol_panel"]=self["webpackChunkcontrol_panel"]||[]).push([[194],{49282:function(e,s,t){t.r(s),t.d(s,{default:function(){return L}});var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("v-dialog",{attrs:{width:"800",scrollable:"",persistent:"",value:!0}},[t("v-card",{attrs:{loading:e.loading,disabled:e.loading}},[t("v-card-title",[t("p",{staticClass:"headline"},[e._v(e._s(e.$t("pages.create_role.title")))]),t("v-spacer"),t("v-btn",{attrs:{icon:"",color:"error"},on:{click:e.goBack}},[t("v-icon",[e._v("mdi-close")])],1)],1),t("v-divider",{}),t("v-card-title",{staticClass:"d-inline-block "},[t("div",[t("v-text-field",{attrs:{type:"text",placeholder:e.$t("pages.create_role.form.name.placeholder"),label:e.$t("pages.create_role.form.name.placeholder"),outlined:"","error-messages":e.nameErrors,block:""},model:{value:e.name,callback:function(s){e.name=s},expression:"name"}}),t("span",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e.$t("pages.create_role.form.permissions.label"))+" ")]),e._v(" ("+e._s(e.$t("pages.create_role.form.permissions.placeholder"))+") ")],1)]),t("v-card-text",{staticClass:"pt-4"},[e.showEmptyPermissionsError?t("v-alert",{attrs:{type:"error",border:"bottom",outlined:""}},[e._v(" "+e._s(e.$t("pages.create_role.form.permissions.errors.empty"))+" ")]):e._e(),t("select-permissions",{staticClass:"mx-auto",on:{input:function(s){e.permissions=s}}})],1),t("v-divider",{}),t("v-card-actions",{staticClass:"pa-2"},[t("v-spacer"),t("v-btn",{attrs:{text:"",large:"",color:"error"},on:{click:e.goBack}},[t("v-icon",[e._v("mdi-cancel")]),t("span",{staticClass:"mx-1"}),t("span",[e._v(e._s(e.$t("pages.create_role.form.cancel")))])],1),t("span",{staticClass:"mx-2"}),t("v-btn",{attrs:{large:"",color:"primary",loading:e.loading},on:{click:e.save}},[t("v-icon",[e._v("mdi-content-save")]),t("span",{staticClass:"mx-2"}),t("span",[e._v(e._s(e.$t("pages.create_role.form.save")))])],1)],1)],1)],1)},a=[],i=t(63114),o=t(99583),n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"d-inline-block justify-center"},[e.loading?t("div",{staticClass:"text-center"},[t("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):e._e(),t("checkboxes-list",{attrs:{fields:e.permissionsList},on:{input:function(s){e.selected=s}}})],1)},l=[],c=t(91761),d=t(34064),m={components:{checkboxesList:d.Z},data(){return{permissions:[],selected:[],loading:!0}},computed:{permissionsList(){const e=[];for(let s of this.permissions)e.push({value:s,label:this.$t(`permissions.${s}`)});return e}},async created(){await this.loadPermissions()},methods:{async loadPermissions(){this.lading=!0;try{const e=await(0,c.LN)();this.permissions=e.data.data.permissions}catch(e){alert(e)}this.loading=!1}},watch:{selected(e){this.$emit("input",e)}}},p=m,h=t(1001),v=t(43453),u=t.n(v),g=t(90624),_=(0,h.Z)(p,n,l,!1,null,null,null),f=_.exports;u()(_,{VProgressCircular:g.Z});var C=t(73821),b={components:{SelectPermissions:f},data(){return{name:"",dialog:!0,permissions:[],nameErrors:[],loading:!1,showEmptyPermissionsError:!1}},methods:{goBack(){window.history.back()},async save(){if(!this.loading)if(this.nameErrors=[],this.showEmptyPermissionsError=!1,""!=this.name.trim())if(this.permissions.length<1)this.showEmptyPermissionsError=!0;else{this.loading=!0;try{const e=await(0,o._d)(this.name,this.permissions);C.c.$emit("roleCreated",e.data.data.role),this.$emit("roleCreated",e.data.data.role),this.goBack()}catch(e){e.response&&e.response.status==i.Z.HTTP_UNPROCESSABLE_ENTITY&&e.response.data.errors.name?this.nameErrors=e.response.data.errors.name:alert(e)}this.loading=!1}else this.nameErrors.push(this.$t("pages.create_role.form.name.errors.empty"))}}},E=b,k=t(35098),y=t(63150),x=t(53237),$=t(37118),w=t(4497),Z=t(11418),V=t(96428),P=t(99762),B=t(55978),T=(0,h.Z)(E,r,a,!1,null,null,null),L=T.exports;u()(T,{VAlert:k.Z,VBtn:y.Z,VCard:x.Z,VCardActions:$.h7,VCardText:$.ZB,VCardTitle:$.EB,VDialog:w.Z,VDivider:Z.Z,VIcon:V.Z,VSpacer:P.Z,VTextField:B.Z})}}]);
//# sourceMappingURL=roles.create.42e7c5f4.js.map